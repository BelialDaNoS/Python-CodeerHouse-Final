<!-- "myblogsite/blog/templates/blog/blog_detail.html" -->
{% load static %}

<!DOCTYPE html>
<html>
<head>
    <title>{{ blog.title }}</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    {{ form.media }}
</head>
<body>
    <h1>{{ blog.title }}</h1>
    <button id="toggleContentButton">Mostrar/Ocultar Detalles</button>

    <!-- Detalles del blog dentro de un div para mostrar/ocultar -->
    <div id="toggleContent" style="display: none;">
        <p>{{ blog.subtitle }}</p>
        <div>{{ blog.body }}</div>
        <p>Escrito por: {{ blog.author }}</p>
        <p>Fecha: {{ blog.date }}</p>
        {% if blog.image %}
            <img src="{{ blog.image.url }}" alt="{{ blog.title }}">
        {% endif %}
    </div>

    <!-- Secci칩n de comentarios -->
    <h2>Comentarios</h2>
    {% for comment in blog.comments.all %}
        <p>{{ comment.author.username }}: {{ comment.text | safe }}</p>
    {% endfor %}

    <!-- Formulario para agregar comentario -->
    {% if user.is_authenticated %}
    <h2>A침adir comentario</h2>
    <form method="post">
        {% csrf_token %}
        <textarea name="text" class="ckeditor" cols="40" rows="10"></textarea><br>
        <input type="submit" value="A침adir comentario">
    </form>
    {% else %}
    <p>Necesitas estar logueado para comentar. <a href="{% url 'login' %}">Iniciar sesi칩n</a></p>
    {% endif %}

    <a href="{% url 'blog_list' %}">Volver a la lista de blogs</a>
    <script src="{% static 'js/script.js' %}"></script>
</body>
</html>
